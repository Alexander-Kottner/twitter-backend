"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.router = void 0;
const express_1 = require("express");
const _utils_1 = require("../utils");
const _utils_2 = require("../utils");
const user_1 = require("../domains/user");
const post_1 = require("../domains/post");
const auth_1 = require("../domains/auth");
const health_1 = require("../domains/health");
const follower_1 = require("../domains/follower");
const reaction_1 = require("../domains/reaction");
const chat_controller_1 = require("../domains/chat/controller/chat.controller");
const chat_service_1 = require("../domains/chat/service/chat.service");
const chat_room_service_1 = require("../domains/chat/service/chat-room.service");
const chat_room_member_service_1 = require("../domains/chat/service/chat-room-member.service");
const message_service_1 = require("../domains/chat/service/message.service");
const chat_room_repository_impl_1 = require("../domains/chat/repository/chat-room.repository.impl");
const chat_room_member_repository_impl_1 = require("../domains/chat/repository/chat-room-member.repository.impl");
const message_repository_impl_1 = require("../domains/chat/repository/message.repository.impl");
const follower_repository_impl_1 = require("../domains/follower/repository/follower.repository.impl");
const chatRoomRepository = new chat_room_repository_impl_1.ChatRoomRepositoryImpl(_utils_2.db);
const chatRoomMemberRepository = new chat_room_member_repository_impl_1.ChatRoomMemberRepositoryImpl(_utils_2.db);
const messageRepository = new message_repository_impl_1.MessageRepositoryImpl(_utils_2.db);
const followerRepository = new follower_repository_impl_1.FollowerRepositoryImpl(_utils_2.db);
const chatRoomService = new chat_room_service_1.ChatRoomService(chatRoomRepository, chatRoomMemberRepository, messageRepository, followerRepository);
const chatRoomMemberService = new chat_room_member_service_1.ChatRoomMemberService(chatRoomMemberRepository, chatRoomRepository);
const messageService = new message_service_1.MessageService(messageRepository, chatRoomMemberRepository);
const chatService = new chat_service_1.ChatService(chatRoomService, chatRoomMemberService, messageService, followerRepository);
exports.router = (0, express_1.Router)();
exports.router.use('/health', health_1.healthRouter);
exports.router.use('/auth', auth_1.authRouter);
exports.router.use('/user', _utils_1.withAuth, user_1.userRouter);
exports.router.use('/post', _utils_1.withAuth, post_1.postRouter);
exports.router.use('/comment', _utils_1.withAuth, post_1.commentRouter);
exports.router.use('/follower', _utils_1.withAuth, follower_1.followerRouter);
exports.router.use('/reaction', _utils_1.withAuth, reaction_1.reactionRouter);
exports.router.use('/chat', chat_controller_1.ChatController.routes(chatService));
//# sourceMappingURL=index.js.map